<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>PrayForYou</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ============ GLOBAL ============ */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        "Tajawal", sans-serif;
    }

    body {
      background: #f4f7f5;
      color: #0f172a;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 24px 12px;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .app {
      background: #ffffff;
      border-radius: 24px;
      max-width: 900px;
      width: 100%;
      box-shadow: 0 18px 45px rgba(15, 118, 110, 0.15);
      padding: 20px 22px 24px;
      transition: background 0.2s ease, box-shadow 0.2s ease, border-color 0.2s;
      border: 1px solid transparent;
    }

    /* ============ HEADER ============ */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 16px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #bbf7d0, #0f766e);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ecfdf5;
      font-size: 22px;
      font-weight: 700;
    }

    .brand-text-title {
      font-weight: 700;
      font-size: 22px;
      color: #022c22;
      transition: color 0.2s;
    }

    .brand-text-sub {
      font-size: 12px;
      color: #6b7280;
      transition: color 0.2s;
    }

    /* language selector + theme */
    .controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .lang-switch {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: #4b5563;
      transition: color 0.2s;
    }

    .lang-btn {
      border: none;
      padding: 6px 10px;
      border-radius: 999px;
      background: #e5e7eb;
      color: #374151;
      font-size: 12px;
      cursor: pointer;
      transition: background 0.15s, color 0.15s, transform 0.08s;
    }

    .lang-btn.active {
      background: #0f766e;
      color: #ecfdf5;
      transform: translateY(-1px);
    }

    .lang-btn:hover {
      background: #cbd5f5;
    }

    .theme-btn {
      border: none;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 16px;
      cursor: pointer;
      background: #e5e7eb;
      color: #111827;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.15s, transform 0.08s, box-shadow 0.15s;
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.15);
    }

    .theme-btn:hover {
      background: #d1d5db;
      transform: translateY(-1px);
      box-shadow: 0 3px 10px rgba(15, 23, 42, 0.25);
    }

    /* ============ MAIN CONTENT ============ */
    .question {
      margin-top: 8px;
      margin-bottom: 10px;
      font-size: 20px;
      font-weight: 600;
      color: #022c22;
      transition: color 0.2s;
    }

    .hint {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 10px;
      transition: color 0.2s;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.2fr);
      gap: 14px;
    }

    /* ============ STATES LIST ============ */
    .states-card {
      background: #f9fafb;
      border-radius: 18px;
      padding: 12px;
      border: 1px solid #e5e7eb;
      transition: background 0.2s, border-color 0.2s;
    }

    .states-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 8px;
      margin-top: 6px;
    }

    .state-btn {
      border-radius: 999px;
      border: none;
      padding: 8px 10px;
      font-size: 13px;
      background: #ffffff;
      color: #111827;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(15, 23, 42, 0.08);
      transition: background 0.15s, transform 0.08s, box-shadow 0.15s,
        color 0.15s;
    }

    .state-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 5px 14px rgba(15, 23, 42, 0.15);
    }

    .state-btn.active {
      background: #0f766e;
      color: #ecfdf5;
      box-shadow: 0 5px 16px rgba(15, 118, 110, 0.4);
    }

    /* ============ PRAYER CARD ============ */
    .prayer-card {
      background: #f9fafb;
      border-radius: 18px;
      padding: 16px 14px 18px;
      border: 1px solid #e5e7eb;
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 230px;
      transition: background 0.2s, border-color 0.2s;
    }

    .prayer-label {
      font-size: 13px;
      color: #6b7280;
      transition: color 0.2s;
    }

    .arabic-prayer {
      font-size: 20px;
      line-height: 1.7;
      color: #064e3b;
      text-align: center;
      margin-top: 4px;
      transition: color 0.2s;
    }

    .latin-prayer {
      font-size: 13px;
      color: #6b7280;
      text-align: center;
      margin-top: 4px;
      transition: color 0.2s;
    }

    .translated-prayer {
      font-size: 14px;
      text-align: center;
      margin-top: 6px;
      color: #111827;
      transition: color 0.2s;
    }

    .verse {
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(16, 185, 129, 0.06);
      border: 1px solid rgba(16, 185, 129, 0.2);
      text-align: center;
      transition: background 0.2s, border-color 0.2s, color 0.2s;
    }

    .verse-text {
      font-size: 15px;
      color: #065f46;
      margin-bottom: 4px;
    }

    .verse-ref {
      font-size: 12px;
      color: #047857;
    }

    .action-row {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }

    .next-btn {
      border: none;
      border-radius: 999px;
      padding: 9px 22px;
      background: #0f766e;
      color: #ecfdf5;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 14px rgba(15, 118, 110, 0.4);
      transition: transform 0.08s, box-shadow 0.15s, background 0.15s;
    }

    .next-btn:hover {
      background: #115e57;
      transform: translateY(-1px);
      box-shadow: 0 5px 18px rgba(15, 118, 110, 0.5);
    }

    .placeholder {
      text-align: center;
      font-size: 14px;
      color: #6b7280;
      margin-top: 25px;
      transition: color 0.2s;
    }

    /* footer note */
    .footer-note {
      font-size: 11px;
      color: #9ca3af;
      text-align: center;
      margin-top: 12px;
      transition: color 0.2s;
    }

    /* ============ DARK MODE ============ */
    body.dark {
      background: #020617;
      color: #e5e7eb;
    }

    body.dark .app {
      background: #020617;
      box-shadow: 0 22px 60px rgba(0, 0, 0, 0.7);
      border-color: #1f2937;
    }

    body.dark .brand-text-title {
      color: #e5e7eb;
    }

    body.dark .brand-text-sub,
    body.dark .hint,
    body.dark .prayer-label,
    body.dark .latin-prayer,
    body.dark .placeholder,
    body.dark .lang-switch,
    body.dark .footer-note {
      color: #9ca3af;
    }

    body.dark .question {
      color: #f9fafb;
    }

    body.dark .states-card,
    body.dark .prayer-card {
      background: #020617;
      border-color: #1f2937;
    }

    body.dark .state-btn {
      background: #111827;
      color: #e5e7eb;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);
    }

    body.dark .state-btn.active {
      background: #0f766e;
      color: #ecfdf5;
      box-shadow: 0 5px 18px rgba(34, 197, 94, 0.6);
    }

    body.dark .arabic-prayer {
      color: #bbf7d0;
    }

    body.dark .translated-prayer {
      color: #e5e7eb;
    }

    body.dark .verse {
      background: rgba(15, 118, 110, 0.22);
      border-color: rgba(45, 212, 191, 0.8);
    }

    body.dark .verse-text {
      color: #a7f3d0;
    }

    body.dark .verse-ref {
      color: #6ee7b7;
    }

    body.dark .theme-btn {
      background: #111827;
      color: #e5e7eb;
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.7);
    }

    body.dark .theme-btn:hover {
      background: #1f2937;
    }

    /* responsive */
    @media (max-width: 760px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
      body {
        align-items: stretch;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="brand">
        <div class="logo">ğŸ¤²</div>
        <div>
          <div class="brand-text-title" id="appName">PrayForYou</div>
          <div class="brand-text-sub" id="tagline">
            Ø¯Ø¹Ø§Ø¡ ÙŠÙ†Ø§Ø³Ø¨ Ø­Ø§Ù„ØªÙƒ â€“ Ø¨Ø«Ù„Ø§Ø« Ù„ØºØ§Øª.
          </div>
        </div>
      </div>

      <div class="controls">
        <div class="lang-switch">
          <span id="langLabel">Ø§Ù„Ù„ØºØ©:</span>
          <button class="lang-btn active" data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
          <button class="lang-btn" data-lang="en">English</button>
          <button class="lang-btn" data-lang="fr">FranÃ§ais</button>
        </div>
        <button class="theme-btn" id="themeToggleBtn" title="Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">
          ğŸŒ™
        </button>
      </div>
    </header>

    <main>
      <div class="question" id="questionText">
        Ù…Ø§ Ù‡ÙŠ Ø­Ø§Ù„ØªÙƒ Ø§Ù„Ø¢Ù†ØŸ
      </div>
      <div class="hint" id="hintText">
        Ø§Ø®ØªØ± Ø£Ù‚Ø±Ø¨ Ø­Ø§Ù„Ø© Ù„ÙƒØŒ ÙˆØ³Ù†Ù‚ØªØ±Ø­ Ø¹Ù„ÙŠÙƒ Ø¯Ø¹Ø§Ø¡Ù‹Ø§ Ù…Ù†Ø§Ø³Ø¨Ù‹Ø§.
      </div>

      <div class="layout">
        <!-- Ø­Ø§Ù„Ø§Øª -->
        <section class="states-card">
          <div id="statesTitle" style="font-size:14px;color:#4b5563;margin-bottom:4px;">
            Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:
          </div>
          <div class="states-grid" id="statesGrid"></div>
        </section>

        <!-- Ø§Ù„Ø¯Ø¹Ø§Ø¡ -->
        <section class="prayer-card">
          <div class="prayer-label" id="prayerLabel">
            Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ù…Ù‚ØªØ±Ø­:
          </div>
          <div class="arabic-prayer" id="arabicPrayer"></div>
          <div class="latin-prayer" id="latinPrayer"></div>
          <div class="translated-prayer" id="translatedPrayer"></div>

          <div class="verse" id="verseBlock" style="display:none;">
            <div class="verse-text" id="verseText"></div>
            <div class="verse-ref" id="verseRef"></div>
          </div>

          <div class="placeholder" id="placeholderText">
            Ø§Ø®ØªØ± Ø­Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± Ù„ÙŠØ¸Ù‡Ø± Ù„Ùƒ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù‡Ù†Ø§.
          </div>

          <div class="action-row">
            <button class="next-btn" id="nextPrayerBtn">
              Ø¯Ø¹Ø§Ø¡ Ø¢Ø®Ø± Ù„Ù†ÙØ³ Ø§Ù„Ø­Ø§Ù„Ø©
            </button>
          </div>
        </section>
      </div>

      <div class="footer-note" id="footerNote">
        Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù†ÙŠØ©Ù ØµØ§Ø­Ø¨Ù‡ Ø£Ù† ÙŠÙƒÙˆÙ† ØµØ¯Ù‚Ø©Ù‹ Ø¬Ø§Ø±ÙŠØ©Ø› ÙÙ„Ø§ ØªÙ†Ø³Ù‡ Ù…Ù† ØµØ§Ù„Ø­ Ø¯Ø¹Ø§Ø¦Ùƒ.
      </div>
    </main>
  </div>

  <script>
    // ================= UI TRANSLATIONS =================
    const uiTranslations = {
      ar: {
        appName: "PrayForYou",
        tagline: "Ø¯Ø¹Ø§Ø¡ ÙŠÙ†Ø§Ø³Ø¨ Ø­Ø§Ù„ØªÙƒ â€“ Ø¨Ø«Ù„Ø§Ø« Ù„ØºØ§Øª.",
        langLabel: "Ø§Ù„Ù„ØºØ©:",
        question: "Ù…Ø§ Ù‡ÙŠ Ø­Ø§Ù„ØªÙƒ Ø§Ù„Ø¢Ù†ØŸ",
        hint: "Ø§Ø®ØªØ± Ø£Ù‚Ø±Ø¨ Ø­Ø§Ù„Ø© Ù„ÙƒØŒ ÙˆØ³Ù†Ù‚ØªØ±Ø­ Ø¹Ù„ÙŠÙƒ Ø¯Ø¹Ø§Ø¡Ù‹Ø§ Ù…Ù†Ø§Ø³Ø¨Ù‹Ø§.",
        statesTitle: "Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:",
        prayerLabel: "Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ù…Ù‚ØªØ±Ø­:",
        placeholder: "Ø§Ø®ØªØ± Ø­Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± Ù„ÙŠØ¸Ù‡Ø± Ù„Ùƒ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù‡Ù†Ø§.",
        next: "Ø¯Ø¹Ø§Ø¡ Ø¢Ø®Ø± Ù„Ù†ÙØ³ Ø§Ù„Ø­Ø§Ù„Ø©",
        footer:
          "Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù†ÙŠØ©Ù ØµØ§Ø­Ø¨Ù‡ Ø£Ù† ÙŠÙƒÙˆÙ† ØµØ¯Ù‚Ø©Ù‹ Ø¬Ø§Ø±ÙŠØ©Ø› ÙÙ„Ø§ ØªÙ†Ø³Ù‡ Ù…Ù† ØµØ§Ù„Ø­ Ø¯Ø¹Ø§Ø¦Ùƒ."
      },
      en: {
        appName: "PrayForYou",
        tagline: "A short prayer tailored to your situation â€” in 3 languages.",
        langLabel: "Language:",
        question: "What do you feel right now?",
        hint: "Choose the situation that fits you, and we will suggest a prayer.",
        statesTitle: "Available situations:",
        prayerLabel: "Suggested prayer:",
        placeholder: "Choose a situation on the left to see a prayer here.",
        next: "Give me another prayer",
        footer:
          "This website was built as a charity project. Please remember its creator in your prayers."
      },
      fr: {
        appName: "PrayForYou",
        tagline:
          "Une invocation adaptÃ©e Ã  ta situation â€” en 3 langues.",
        langLabel: "Langue :",
        question: "Que ressens-tu en ce moment ?",
        hint: "Choisis la situation qui te ressemble, et nous te proposerons une invocation.",
        statesTitle: "Situations disponibles :",
        prayerLabel: "Invocation proposÃ©e :",
        placeholder:
          "Choisis une situation Ã  gauche pour afficher une invocation ici.",
        next: "Donne-moi une autre invocation",
        footer:
          "Ce site a Ã©tÃ© crÃ©Ã© comme aumÃ´ne continue. Nâ€™oublie pas son crÃ©ateur dans tes invocations."
      }
    };

    // ================= STATES & PRAYERS =================
    // Ù„ÙƒÙ„ Ø¯Ø¹Ø§Ø¡ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¢ÙŠØ©: ayahAr + ayahRef (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
    const states = [
      {
        id: "sad",
        labels: { ar: "Ø­Ø²ÙŠÙ†", en: "Sadness", fr: "Tristesse" },
        prayers: [
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ø§Ø´Ù’Ø±ÙØ­Ù’ ØµØ¯Ø±ÙŠØŒ ÙˆØ§Ø°Ù‡Ø¨ Ù‡Ù…Ù‘ÙŠØŒ ÙˆØ§Ù…Ù„Ø£ Ù‚Ù„Ø¨ÙŠ Ø±Ø¶Ø§ ÙˆØ³ÙƒÙŠÙ†Ø©.",
            en: "O Allah, open my chest, remove my sorrow, and fill my heart with peace and contentment.",
            fr: "Ã” Allah, ouvre ma poitrine, enlÃ¨ve ma tristesse et remplis mon cÅ“ur de paix et de satisfaction.",
            ayahAr: "ï´¿ Ù„ÙØ§ ØªÙØ­Ù’Ø²ÙÙ†Ù’ Ø¥ÙÙ†Ù‘Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ù…ÙØ¹ÙÙ†ÙØ§ ï´¾",
            ayahRef: "Ø§Ù„ØªÙˆØ¨Ø© 40"
          },
          {
            ar: "ÙŠØ§ Ø±Ø¨ØŒ Ø§Ø¬Ø¹Ù„ Ù…Ø§ Ø£Ø­Ø²Ù†Ù†ÙŠ Ø³Ø¨Ø¨Ù‹Ø§ Ù„Ø±ÙØ¹Ø©Ù Ø¹Ù†Ø¯ÙƒØŒ ÙˆÙ„Ø§ ØªØ¬Ø¹Ù„ ÙÙŠ Ù‚Ù„Ø¨ÙŠ Ø¥Ù„Ø§ Ø§Ù„Ø®ÙŠØ±.",
            en: "My Lord, make what saddened me a reason to rise in Your sight, and leave nothing in my heart but goodness.",
            fr: "Seigneur, fais de ce qui mâ€™a attristÃ© une cause dâ€™Ã©lÃ©vation auprÃ¨s de Toi et ne laisse dans mon cÅ“ur que le bien.",
            ayahAr: "ï´¿ ÙˆÙØ¨ÙØ´Ù‘ÙØ±Ù Ø§Ù„ØµÙ‘ÙØ§Ø¨ÙØ±ÙÙŠÙ†Ù ï´¾",
            ayahRef: "Ø§Ù„Ø¨Ù‚Ø±Ø© 155"
          }
        ]
      },
      {
        id: "anxious",
        labels: { ar: "Ù‚Ù„Ù‚ / Ø®Ø§Ø¦Ù", en: "Anxiety / Fear", fr: "AnxiÃ©tÃ© / Peur" },
        prayers: [
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù Ø§Ù„Ù’Ù‡ÙÙ…ÙÙ‘ ÙˆÙØ§Ù„Ù’Ø­ÙØ²ÙÙ†ÙØŒ ÙˆÙØ£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù Ø§Ù„Ù’Ø¬ÙØ¨Ù’Ù†Ù ÙˆÙØ§Ù„Ù’Ø¨ÙØ®Ù’Ù„Ù.",
            en: "O Allah, I seek refuge in You from worry and grief, and I seek refuge in You from cowardice and miserliness.",
            fr: "Ã” Allah, je cherche refuge auprÃ¨s de Toi contre lâ€™inquiÃ©tude et la tristesse, et contre la lÃ¢chetÃ© et lâ€™avarice.",
            ayahAr: "ï´¿ Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†Ù‘Ù Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù ï´¾",
            ayahRef: "Ø§Ù„Ø±Ø¹Ø¯ 28"
          },
          {
            ar: "ÙŠØ§ Ø§Ù„Ù„Ù‡ØŒ Ø·Ù…Ù’Ø¦ÙÙ† Ù‚Ù„Ø¨ÙŠØŒ ÙˆÙ‚Ø±Ù‘ Ø¹ÙŠÙ†ÙŠØŒ ÙˆØ£Ø°Ù‡Ø¨ Ø®ÙˆÙÙŠØŒ ÙØ£Ù†Øª Ø­Ø³Ø¨ÙŠ ÙˆÙ†Ø¹Ù… Ø§Ù„ÙˆÙƒÙŠÙ„.",
            en: "O Allah, calm my heart, soothe my eyes, and remove my fear â€” You are sufficient for me and the best disposer of affairs.",
            fr: "Ã” Allah, apaise mon cÅ“ur, rassure mes yeux et enlÃ¨ve ma peur. Tu me suffies et Tu es le meilleur Garant.",
            ayahAr: "ï´¿ Ø­ÙØ³Ù’Ø¨ÙÙ†ÙØ§ Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙˆÙÙ†ÙØ¹Ù’Ù…Ù Ø§Ù„Ù’ÙˆÙÙƒÙÙŠÙ„Ù ï´¾",
            ayahRef: "Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù† 173"
          }
        ]
      },
      {
        id: "ill",
        labels: { ar: "Ù…Ø±ÙŠØ¶", en: "Illness", fr: "Maladie" },
        prayers: [
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ø±Ø¨Ù‘Ù Ø§Ù„Ù†Ø§Ø³ØŒ Ø£Ø°Ù‡Ø¨ Ø§Ù„Ø¨Ø£Ø³ØŒ Ø§Ø´ÙÙ Ø£Ù†Øª Ø§Ù„Ø´Ø§ÙÙŠØŒ Ù„Ø§ Ø´ÙØ§Ø¡ Ø¥Ù„Ø§ Ø´ÙØ§Ø¤ÙƒØŒ Ø´ÙØ§Ø¡Ù‹ Ù„Ø§ ÙŠØºØ§Ø¯Ø± Ø³Ù‚Ù…Ù‹Ø§.",
            en: "O Lord of mankind, remove the harm and cure; You are the Healer. There is no healing except Your healing, a cure that leaves no illness.",
            fr: "Ã” Seigneur des gens, enlÃ¨ve le mal et accorde la guÃ©rison. Tu es le GuÃ©risseur ; il nâ€™y a de guÃ©rison que Ta guÃ©rison, une guÃ©rison qui ne laisse aucune maladie.",
            ayahAr: "ï´¿ ÙˆÙØ¥ÙØ°ÙØ§ Ù…ÙØ±ÙØ¶Ù’ØªÙ ÙÙÙ‡ÙÙˆÙ ÙŠÙØ´Ù’ÙÙÙŠÙ†Ù ï´¾",
            ayahRef: "Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡ 80"
          },
          {
            ar: "ÙŠØ§ Ø±Ø¨ØŒ Ø§Ø¬Ø¹Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø±Ø¶ ÙƒÙØ§Ø±Ø©Ù‹ ÙˆØ±ÙØ¹Ø©ØŒ ÙˆØ§Ù…Ù†Ø­Ù†ÙŠ ØµØ¨Ø±Ù‹Ø§ Ø¬Ù…ÙŠÙ„Ù‹Ø§ ÙˆØ¹Ø§ÙÙŠØ© ØªØ§Ù…Ø©.",
            en: "My Lord, make this illness an expiation and a means of elevation, and grant me beautiful patience and complete healing.",
            fr: "Seigneur, fais de cette maladie une expiation et une Ã©lÃ©vation, et accorde-moi une belle patience et une guÃ©rison complÃ¨te.",
            ayahAr: "ï´¿ Ø¥ÙÙ†Ù‘Ù Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§ ï´¾",
            ayahRef: "Ø§Ù„Ø´Ø±Ø­ 6"
          }
        ]
      },
      {
        id: "guilt",
        labels: { ar: "Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ø°Ù†Ø¨", en: "Guilt / Repentance", fr: "CulpabilitÃ© / Repentir" },
        prayers: [
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø¸Ù„Ù…ØªÙ Ù†ÙØ³ÙŠ Ø¸Ù„Ù…Ù‹Ø§ ÙƒØ«ÙŠØ±Ù‹Ø§ØŒ ÙˆÙ„Ø§ ÙŠØºÙØ± Ø§Ù„Ø°Ù†ÙˆØ¨ Ø¥Ù„Ø§ Ø£Ù†ØªØŒ ÙØ§ØºÙØ± Ù„ÙŠ Ù…ØºÙØ±Ø©Ù‹ Ù…Ù† Ø¹Ù†Ø¯Ùƒ ÙˆØ§Ø±Ø­Ù…Ù†ÙŠ.",
            en: "O Allah, I have wronged myself greatly, and none forgives sins except You, so forgive me with a forgiveness from You and have mercy on me.",
            fr: "Ã” Allah, je me suis beaucoup fait du tort Ã  moi-mÃªme, et nul ne pardonne les pÃ©chÃ©s en dehors de Toi. Pardonne-moi donc un pardon venant de Ta part et fais-moi misÃ©ricorde.",
            ayahAr: "ï´¿ Ù‚ÙÙ„Ù’ ÙŠÙØ§ Ø¹ÙØ¨ÙØ§Ø¯ÙÙŠÙ Ø§Ù„Ù‘ÙØ°ÙÙŠÙ†Ù Ø£ÙØ³Ù’Ø±ÙÙÙÙˆØ§ Ø¹ÙÙ„ÙÙ‰Ù° Ø£ÙÙ†ÙÙØ³ÙÙ‡ÙÙ…Ù’ Ù„ÙØ§ ØªÙÙ‚Ù’Ù†ÙØ·ÙÙˆØ§ Ù…ÙÙ† Ø±Ù‘ÙØ­Ù’Ù…ÙØ©Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ï´¾",
            ayahRef: "Ø§Ù„Ø²Ù…Ø± 53"
          },
          {
            ar: "ÙŠØ§ ØªÙˆÙ‘Ø§Ø¨ØŒ ØªÙØ¨Ù’ Ø¹Ù„ÙŠÙ‘Ù ØªÙˆØ¨Ø©Ù‹ Ù†ØµÙˆØ­Ù‹Ø§ØŒ ÙˆØ§ØµØ±Ù Ù‚Ù„Ø¨ÙŠ Ø¹Ù† ÙƒÙ„ Ù…Ø§ Ù„Ø§ ÙŠØ±Ø¶ÙŠÙƒ.",
            en: "O Accepter of repentance, grant me a sincere repentance and turn my heart away from everything that displeases You.",
            fr: "Ã” Toi qui acceptes le repentir, accorde-moi un repentir sincÃ¨re et dÃ©tourne mon cÅ“ur de tout ce qui Te dÃ©plaÃ®t.",
            ayahAr: "ï´¿ Ø¥ÙÙ†Ù‘Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙŠÙØ­ÙØ¨Ù‘Ù Ø§Ù„ØªÙ‘ÙÙˆÙ‘ÙØ§Ø¨ÙÙŠÙ†Ù ï´¾",
            ayahRef: "Ø§Ù„Ø¨Ù‚Ø±Ø© 222"
          }
        ]
      },
      {
        id: "happy",
        labels: { ar: "Ø³Ø¹ÙŠØ¯ / Ø´ÙƒØ±", en: "Happiness / Gratitude", fr: "Joie / Gratitude" },
        prayers: [
          {
            ar: "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø¹Ù„Ù‰ Ù…Ø§ Ø£Ù†Ø¹Ù…ØªÙ Ø¨Ù‡ Ø¹Ù„ÙŠÙ‘ÙØŒ Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø¹Ù…Ø© Ø¹ÙˆÙ†Ù‹Ø§ Ù„ÙŠ Ø¹Ù„Ù‰ Ø·Ø§Ø¹ØªÙƒ.",
            en: "All praise is for You, O Allah, for what You have blessed me with. Make this blessing a help for me in obeying You.",
            fr: "Louange Ã  Toi, Ã´ Allah, pour ce dont Tu mâ€™as comblÃ©. Fais que ce bienfait mâ€™aide Ã  Tâ€™obÃ©ir.",
            ayahAr: "ï´¿ Ù„ÙØ¦ÙÙ† Ø´ÙÙƒÙØ±Ù’ØªÙÙ…Ù’ Ù„ÙØ£ÙØ²ÙÙŠØ¯ÙÙ†Ù‘ÙÙƒÙÙ…Ù’ ï´¾",
            ayahRef: "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… 7"
          },
          {
            ar: "ÙŠØ§ Ø±Ø¨ØŒ ÙƒÙ…Ø§ Ø£Ø³Ø¹Ø¯Øª Ù‚Ù„Ø¨ÙŠ Ø§Ù„ÙŠÙˆÙ…ØŒ ÙÙ„Ø§ ØªØ¬Ø¹Ù„Ù†ÙŠ Ø£Ù†Ø³Ù‰ ÙØ¶Ù„ÙƒØŒ ÙˆÙˆÙÙ‚Ù†ÙŠ Ù„Ø´ÙƒØ± Ù†Ø¹Ù…ØªÙƒ.",
            en: "My Lord, just as You brought joy to my heart today, do not let me forget Your favor, and enable me to show gratitude for Your blessing.",
            fr: "Seigneur, comme Tu as rÃ©joui mon cÅ“ur aujourdâ€™hui, ne me laisse pas oublier Ta grÃ¢ce et accorde-moi de Te remercier pour Tes bienfaits.",
            ayahAr: "ï´¿ ÙˆÙÙ…ÙØ§ Ø¨ÙÙƒÙÙ… Ù…Ù‘ÙÙ† Ù†Ù‘ÙØ¹Ù’Ù…ÙØ©Ù ÙÙÙ…ÙÙ†Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ï´¾",
            ayahRef: "Ø§Ù„Ù†Ø­Ù„ 53"
          }
        ]
      },
      {
        id: "loss",
        labels: { ar: "ÙÙ‚Ø¯Ø§Ù† Ø´Ø®Øµ", en: "Loss", fr: "Perte" },
        prayers: [
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø­Ù… Ù…Ù† ÙÙ‚Ø¯Ù†Ø§Ù‡Ù… Ø±Ø­Ù…Ø©Ù‹ ÙˆØ§Ø³Ø¹Ø©ØŒ ÙˆØ§Ø¬Ù…Ø¹Ù†Ø§ Ø¨Ù‡Ù… ÙÙŠ Ø¬Ù†Ù‘Ø§Øª Ø§Ù„Ù†Ø¹ÙŠÙ… Ø¨Ù„Ø§ Ø³Ø§Ø¨Ù‚Ø© Ø¹Ø°Ø§Ø¨ ÙˆÙ„Ø§ Ø­Ø³Ø§Ø¨.",
            en: "O Allah, have vast mercy on those we have lost, and reunite us with them in gardens of bliss without prior punishment or reckoning.",
            fr: "Ã” Allah, fais misÃ©ricorde largement Ã  ceux que nous avons perdus et rÃ©unis-nous avec eux dans les jardins du dÃ©lice sans chÃ¢timent ni compte prÃ©alable.",
            ayahAr: "ï´¿ Ø¥ÙÙ†Ù‘ÙØ§ Ù„ÙÙ„Ù‘ÙÙ‡Ù ÙˆÙØ¥ÙÙ†Ù‘ÙØ§ Ø¥ÙÙ„ÙÙŠÙ’Ù‡Ù Ø±ÙØ§Ø¬ÙØ¹ÙÙˆÙ†Ù ï´¾",
            ayahRef: "Ø§Ù„Ø¨Ù‚Ø±Ø© 156"
          },
          {
            ar: "ÙŠØ§ Ø±Ø¨ØŒ Ø§Ø¬Ø¨Ø± ÙƒØ³Ø± Ù‚Ù„Ø¨ÙŠØŒ ÙˆØ§Ù…Ù†Ø­Ù†ÙŠ ØµØ¨Ø±Ù‹Ø§ ÙˆØ±Ø¶Ù‹Ø§ Ø¨Ù‚Ø¶Ø§Ø¦Ùƒ.",
            en: "My Lord, mend my broken heart and grant me patience and contentment with Your decree.",
            fr: "Seigneur, rÃ©pare mon cÅ“ur brisÃ© et accorde-moi patience et satisfaction de Ton dÃ©cret.",
            ayahAr: "ï´¿ ÙˆÙØ§ØµÙ’Ø¨ÙØ±Ù’ ÙˆÙÙ…ÙØ§ ØµÙØ¨Ù’Ø±ÙÙƒÙ Ø¥ÙÙ„Ù‘ÙØ§ Ø¨ÙØ§Ù„Ù„Ù‘ÙÙ‡Ù ï´¾",
            ayahRef: "Ø§Ù„Ù†Ø­Ù„ 127"
          }
        ]
      },
      {
        id: "rizq",
        labels: { ar: "Ø·Ù„Ø¨ Ø§Ù„Ø±Ø²Ù‚", en: "Sustenance", fr: "Subsistance" },
        prayers: [
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†ÙŠ Ø±Ø²Ù‚Ù‹Ø§ Ø­Ù„Ø§Ù„Ù‹Ø§ Ø·ÙŠØ¨Ù‹Ø§ ÙˆØ§Ø³Ø¹Ù‹Ø§ØŒ ÙˆØ¨Ø§Ø±Ùƒ Ù„ÙŠ ÙÙŠÙ‡ ÙˆØ§ØµØ±Ù Ø¹Ù†ÙŠ Ø§Ù„Ø­Ø±Ø§Ù….",
            en: "O Allah, grant me lawful, pure and abundant provision, bless it for me, and keep me away from the unlawful.",
            fr: "Ã” Allah, accorde-moi une subsistance licite, pure et abondante, bÃ©nis-la pour moi et Ã©loigne-moi de lâ€™illicite.",
            ayahAr: "ï´¿ ÙˆÙÙÙÙŠ Ø§Ù„Ø³Ù‘ÙÙ…ÙØ§Ø¡Ù Ø±ÙØ²Ù’Ù‚ÙÙƒÙÙ…Ù’ ÙˆÙÙ…ÙØ§ ØªÙÙˆØ¹ÙØ¯ÙÙˆÙ†Ù ï´¾",
            ayahRef: "Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª 22"
          },
          {
            ar: "ÙŠØ§ ÙƒØ±ÙŠÙ…ØŒ Ø§ÙØªØ­ Ù„ÙŠ Ø£Ø¨ÙˆØ§Ø¨ ÙØ¶Ù„ÙƒØŒ ÙˆØ§ØºÙ†ÙÙ†ÙŠ Ø¨Ø­Ù„Ø§Ù„Ùƒ Ø¹Ù† Ø­Ø±Ø§Ù…ÙƒØŒ ÙˆØ¨Ø·Ø§Ø¹ØªÙƒ Ø¹Ù† Ù…Ø¹ØµÙŠØªÙƒ.",
            en: "O Most Generous, open for me the doors of Your bounty, and suffice me with what is lawful instead of what is unlawful, and with obedience instead of disobedience.",
            fr: "Ã” GÃ©nÃ©reux, ouvre-moi les portes de Ta grÃ¢ce et suffi-moi par le licite loin de lâ€™illicite, et par lâ€™obÃ©issance loin de la dÃ©sobÃ©issance.",
            ayahAr: "ï´¿ Ø¥ÙÙ†Ù‘Ù Ø±ÙØ¨Ù‘ÙÙŠ ÙŠÙØ¨Ù’Ø³ÙØ·Ù Ø§Ù„Ø±Ù‘ÙØ²Ù’Ù‚Ù Ù„ÙÙ…ÙÙ† ÙŠÙØ´ÙØ§Ø¡Ù ï´¾",
            ayahRef: "Ø³Ø¨Ø£ 36"
          }
        ]
      },
      {
        id: "exam",
        labels: { ar: "Ø§Ù…ØªØ­Ø§Ù† / Ø¯Ø±Ø§Ø³Ø©", en: "Exam / Study", fr: "Examen / Ã‰tudes" },
        prayers: [
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ù„Ø§ Ø³Ù‡Ù„ Ø¥Ù„Ø§ Ù…Ø§ Ø¬Ø¹Ù„ØªÙ‡ Ø³Ù‡Ù„Ù‹Ø§ØŒ ÙˆØ£Ù†Øª ØªØ¬Ø¹Ù„ Ø§Ù„Ø­Ø²Ù† Ø¥Ø°Ø§ Ø´Ø¦Øª Ø³Ù‡Ù„Ù‹Ø§ØŒ ÙØ³Ù‡Ù‘Ù„ Ø¹Ù„ÙŠÙ‘Ù Ø£Ù…Ø±ÙŠ ÙˆØ¹Ù„Ù‘Ù…Ù†ÙŠ Ù…Ø§ ÙŠÙ†ÙØ¹Ù†ÙŠ.",
            en: "O Allah, there is no ease except what You make easy, and You make difficulty, if You will, easy. So make my matter easy and teach me what benefits me.",
            fr: "Ã” Allah, rien nâ€™est facile si Tu ne le rends pas facile, et Tu rends la difficultÃ© facile si Tu le veux. Facilite donc mon affaire et apprends-moi ce qui mâ€™est utile.",
            ayahAr: "ï´¿ Ø±Ù‘ÙØ¨Ù‘Ù Ø²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ ï´¾",
            ayahRef: "Ø·Ù‡ 114"
          }
        ]
      },
      {
        id: "guidance",
        labels: { ar: "Ù‡Ø¯Ø§ÙŠØ© / Ø­ÙŠØ±Ø©", en: "Guidance", fr: "Guidance" },
        prayers: [
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ø§Ù‡Ù’Ø¯ÙÙ†ÙŠ ÙˆØ³Ø¯Ù‘Ø¯Ù†ÙŠØŒ ÙˆØ§Ø®ØªØ± Ù„ÙŠ ÙˆÙ„Ø§ ØªÙƒÙ„Ù†ÙŠ Ø¥Ù„Ù‰ Ù†ÙØ³ÙŠ Ø·Ø±ÙØ© Ø¹ÙŠÙ†.",
            en: "O Allah, guide me and keep me firm, choose what is best for me, and do not leave me to myself even for the blink of an eye.",
            fr: "Ã” Allah, guide-moi et affermis-moi, choisis ce quâ€™il y a de meilleur pour moi et ne me laisse pas Ã  moi-mÃªme ne serait-ce que le temps dâ€™un clin dâ€™Å“il.",
            ayahAr: "ï´¿ ÙˆÙÙ…ÙÙ† ÙŠÙÙ‡Ù’Ø¯Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙÙÙ‡ÙÙˆÙ Ø§Ù„Ù’Ù…ÙÙ‡Ù’ØªÙØ¯ÙÙŠ ï´¾",
            ayahRef: "Ø§Ù„Ø£Ø¹Ø±Ø§Ù 178"
          }
        ]
      },
      {
        id: "forSomeone",
        labels: { ar: "Ø¯Ø¹Ø§Ø¡ Ù„Ø´Ø®Øµ Ø¢Ø®Ø±", en: "For someone else", fr: "Pour quelquâ€™un" },
        prayers: [
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¹Ø·ÙÙ‡ Ø®ÙŠØ± Ù…Ø§ ØªØ³Ø£Ù„ØŒ ÙˆØ§ØµØ±Ù Ø¹Ù†Ù‡ Ø´Ø± Ù…Ø§ ØªØ®Ø§ÙØŒ ÙˆÙ‚Ø±Ù‘Ø¨Ù‡ Ø¥Ù„ÙŠÙƒ ÙˆØ¨Ø§Ø±Ùƒ Ù„Ù‡ ÙÙŠ Ø¹Ù…Ø±Ù‡ ÙˆØ¹Ø§ÙÙŠØªÙ‡.",
            en: "O Allah, grant them the best of what is asked, protect them from what is feared, draw them near to You, and bless their life and health.",
            fr: "Ã” Allah, accorde-lui le meilleur de ce qui peut Ãªtre demandÃ©, protÃ¨ge-le de ce que lâ€™on craint, rapproche-le de Toi et bÃ©nis sa vie et sa santÃ©.",
            ayahAr: "ï´¿ ÙˆÙØ§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙˆÙ†Ù ÙˆÙØ§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙØ§ØªÙ Ø¨ÙØ¹Ù’Ø¶ÙÙ‡ÙÙ…Ù’ Ø£ÙÙˆÙ’Ù„ÙÙŠÙØ§Ø¡Ù Ø¨ÙØ¹Ù’Ø¶Ù ï´¾",
            ayahRef: "Ø§Ù„ØªÙˆØ¨Ø© 71"
          },
          {
            ar: "ÙŠØ§ Ø±Ø¨ØŒ ÙƒÙ…Ø§ Ø£Ø­Ø¨Ø¨ØªÙ‡ ÙÙŠÙƒØŒ ÙØ§Ø­ÙØ¸Ù‡ Ø¨Ø­ÙØ¸ÙƒØŒ ÙˆØ§ÙƒØªØ¨ Ù„Ù‡ Ù…Ù† Ø§Ù„Ø®ÙŠØ± Ù…Ø§ ØªØ±Ø¶Ø§Ù‡ Ù„Ù‡ ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ù„Ø¢Ø®Ø±Ø©.",
            en: "My Lord, just as I love them for Your sake, protect them with Your protection and decree for them the good that You are pleased with in this life and the next.",
            fr: "Seigneur, comme je lâ€™aime en Toi, protÃ¨ge-le par Ta protection et dÃ©crÃ¨te pour lui le bien dont Tu es satisfait ici-bas et dans lâ€™au-delÃ .",
            ayahAr: "ï´¿ Ø¥ÙÙ†Ù‘Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙŠÙØ­ÙØ¨Ù‘Ù Ø§Ù„Ù’Ù…ÙØ­Ù’Ø³ÙÙ†ÙÙŠÙ†Ù ï´¾",
            ayahRef: "Ø§Ù„Ø¨Ù‚Ø±Ø© 195"
          }
        ]
      },
      {
        id: "protection",
        labels: { ar: "Ø­Ù…Ø§ÙŠØ© ÙˆØ·Ù…Ø£Ù†ÙŠÙ†Ø©", en: "Protection & Peace", fr: "Protection & Paix" },
        prayers: [
          {
            ar: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‡Ù Ø§Ù„Ù‘ÙØ°ÙŠ Ù„Ø§ ÙŠÙØ¶ÙØ±Ù‘Ù Ù…Ø¹Ù Ø§Ø³Ù…ÙÙ‡Ù Ø´ÙÙŠØ¡ÙŒ ÙÙŠ Ø§Ù„Ø£Ø±Ø¶Ù ÙˆÙ„Ø§ ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡Ù ÙˆÙ‡Ùˆ Ø§Ù„Ø³Ù…ÙŠØ¹Ù Ø§Ù„Ø¹Ù„ÙŠÙ….",
            en: "In the Name of Allah, with whose Name nothing on earth or in heaven can cause harm, and He is the All-Hearing, All-Knowing.",
            fr: "Au nom dâ€™Allah, avec le Nom duquel rien sur terre ni au ciel ne peut nuire ; Il est lâ€™Audient, lâ€™Omniscient.",
            ayahAr: "ï´¿ ÙˆÙØ§Ù„Ù„Ù‘ÙÙ‡Ù Ø®ÙÙŠÙ’Ø±Ù Ø­ÙØ§ÙÙØ¸Ù‹Ø§ ï´¾",
            ayahRef: "ÙŠÙˆØ³Ù 64"
          },
          {
            ar: "Ø§Ù„Ù„Ù‡Ù… Ø§Ø­Ø·Ù†ÙŠ Ø¨Ø³ÙŠØ§Ø¬ Ù…Ù† Ø±Ø­Ù…ØªÙƒØŒ ÙˆØ£Ù…ÙÙ† Ù‚Ù„Ø¨ÙŠ ÙˆØ£Ù‡Ù„ÙŠ Ù…Ù† ÙƒÙ„ Ø³ÙˆØ¡.",
            en: "O Allah, surround me with a shield of Your mercy, and grant safety to my heart and my family from all harm.",
            fr: "Ã” Allah, entoure-moi dâ€™une barriÃ¨re de Ta misÃ©ricorde et accorde la sÃ©curitÃ© Ã  mon cÅ“ur et Ã  ma famille contre tout mal.",
            ayahAr: "ï´¿ Ù„ÙÙ‡ÙÙ…Ù’ Ø¯ÙØ§Ø±Ù Ø§Ù„Ø³Ù‘ÙÙ„ÙØ§Ù…Ù Ø¹ÙÙ†Ø¯Ù Ø±ÙØ¨Ù‘ÙÙ‡ÙÙ…Ù’ ï´¾",
            ayahRef: "Ø§Ù„Ø£Ù†Ø¹Ø§Ù… 127"
          }
        ]
      }
    ];

    let currentLang = "ar";
    let currentStateId = null;
    const THEME_KEY = "pfy-theme";

    // ================= THEME =================
    function applyTheme(theme) {
      const body = document.body;
      const btn = document.getElementById("themeToggleBtn");
      if (theme === "dark") {
        body.classList.add("dark");
        btn.textContent = "â˜€";
        btn.title = "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­";
      } else {
        body.classList.remove("dark");
        btn.textContent = "ğŸŒ™";
        btn.title = "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ";
      }
      localStorage.setItem(THEME_KEY, theme);
    }

    // ================= LANGUAGE =================
    function setLanguage(lang) {
      currentLang = lang;

      if (lang === "ar") {
        document.documentElement.lang = "ar";
        document.documentElement.dir = "rtl";
      } else {
        document.documentElement.lang = lang;
        document.documentElement.dir = "ltr";
      }

      const t = uiTranslations[lang];
      document.getElementById("appName").textContent = t.appName;
      document.getElementById("tagline").textContent = t.tagline;
      document.getElementById("langLabel").textContent = t.langLabel;
      document.getElementById("questionText").textContent = t.question;
      document.getElementById("hintText").textContent = t.hint;
      document.getElementById("statesTitle").textContent = t.statesTitle;
      document.getElementById("prayerLabel").textContent = t.prayerLabel;
      document.getElementById("placeholderText").textContent = t.placeholder;
      document.getElementById("nextPrayerBtn").textContent = t.next;
      document.getElementById("footerNote").textContent = t.footer;

      renderStates();
      if (currentStateId) {
        showRandomPrayer(currentStateId);
      }
    }

    function renderStates() {
      const grid = document.getElementById("statesGrid");
      grid.innerHTML = "";
      states.forEach((state) => {
        const btn = document.createElement("button");
        btn.className = "state-btn";
        if (state.id === currentStateId) btn.classList.add("active");
        btn.textContent = state.labels[currentLang];
        btn.dataset.id = state.id;
        btn.addEventListener("click", () => {
          currentStateId = state.id;
          document.querySelectorAll(".state-btn").forEach((b) =>
            b.classList.remove("active")
          );
          btn.classList.add("active");
          showRandomPrayer(state.id);
        });
        grid.appendChild(btn);
      });
    }

    function showRandomPrayer(stateId) {
      const state = states.find((s) => s.id === stateId);
      if (!state) return;

      const random =
        state.prayers[Math.floor(Math.random() * state.prayers.length)];

      const arabicEl = document.getElementById("arabicPrayer");
      const latinEl = document.getElementById("latinPrayer");
      const translatedEl = document.getElementById("translatedPrayer");
      const placeholderEl = document.getElementById("placeholderText");
      const verseBlock = document.getElementById("verseBlock");
      const verseText = document.getElementById("verseText");
      const verseRef = document.getElementById("verseRef");

      arabicEl.textContent = random.ar;
      latinEl.textContent = ""; // Ù„Ùˆ Ø­Ø¨ÙŠØª ØªØ¶ÙŠÙ ÙƒØªØ§Ø¨Ø© Ù„Ø§ØªÙŠÙ†ÙŠØ© ÙÙŠÙ…Ø§ Ø¨Ø¹Ø¯
      translatedEl.textContent = random[currentLang];

      if (random.ayahAr && random.ayahRef) {
        verseText.textContent = random.ayahAr;
        verseRef.textContent = random.ayahRef;
        verseBlock.style.display = "block";
      } else {
        verseBlock.style.display = "none";
      }

      placeholderEl.style.display = "none";
    }

    // ================= INIT =================

    // language buttons
    document.querySelectorAll(".lang-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        document
          .querySelectorAll(".lang-btn")
          .forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        setLanguage(btn.dataset.lang);
      });
    });

    // theme toggle
    document.getElementById("themeToggleBtn").addEventListener("click", () => {
      const current = document.body.classList.contains("dark")
        ? "dark"
        : "light";
      applyTheme(current === "dark" ? "light" : "dark");
    });

    // next prayer
    document.getElementById("nextPrayerBtn").addEventListener("click", () => {
      if (currentStateId) {
        showRandomPrayer(currentStateId);
      }
    });

    // Ø£ÙˆÙ„ ØªØ´ØºÙŠÙ„: Ø«ÙŠÙ… + Ù„ØºØ© + Ø­Ø§Ù„Ø§Øª
    const savedTheme = localStorage.getItem(THEME_KEY) || "light";
    applyTheme(savedTheme);
    renderStates();
    setLanguage("ar");
  </script>
</body>
</html>